@using System.Security.Claims

@{
    Layout = "_Layout";
    
}

<div class="container wrapper">
    <h1>Bienvenue, <span class="fw-bold text-primary mb-3">@User.Identity.Name</span></h1>
    <form method="post" action="/Auth/ChangePassword/@User.FindFirstValue(ClaimTypes.NameIdentifier)" class="col-12 col-md-6 frost mx-auto">
        <div class="mb-3">
            <div class="flex-grow-1">
                <label for="" class="form-label">Mot de passe</label>
                <input type="password" class="form-control" name="Password" id="Password">
            </div>
        </div>
        <div class="mb-3">
            <div class="flex-grow-1">
                <label for="" class="form-label ">Confirmer mot de passe</label>
                <input type="password" class="form-control" name="ConfirmPassword" id="ConfirmPassword">
            </div>
        </div>
        
        <button type="submit" style="margin-left: auto;" class="btn btn-primary">Valider</button>
    </form>
</div>


<script defer>
document.querySelector("form").addEventListener("submit", (e) => {

    e.preventDefault();
    const password = document.querySelector("#Password").value;
    const confirmPassword = document.querySelector("#ConfirmPassword").value;
    if (password !== confirmPassword) {
        alert("Les mots de passe ne correspondent pas");
        return;
    }
    e.target.submit();
});
</script>